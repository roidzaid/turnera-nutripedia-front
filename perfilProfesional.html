<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Espacio Nutripedia</title>
	<script src="js/variablesGlobales.js"></script>
	<script src="js/profesionales.js"></script>
	<script src="js/fotos.js"></script>
	<script src="js/valorConsulta.js"></script>
	<script src="js/horarios.js"></script>
	<script src="js/licencias.js"></script>
	<script src="js/valorConsulta.js"></script>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

	<link rel="stylesheet" href="https://cdn.materialdesignicons.com/4.8.95/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <link rel="stylesheet" type="text/css" href="css/perfil.css">
</head>
<body style="margin:5px; padding:0">

<!-- foto -->
		
	<div id="idDatosPersonales">
		<div id="idBloqueFoto">
		
			<div id="idBloqueTitulo">
				<h3 id="idFotoTitulo">Foto perfil</h3>

				<div id="idEditFoto" title="Actualizar foto" align="center">
					<i onclick="actualizarFoto()"class="material-icons button edit">edit</i>
				</div>
			</div>	

			<div id=divFoto>
			  <img id="foto" class="card-img-top" alt="Foto perfil">
			</div>
			
			
		</div>

<!-- Datos profesional -->
		<div id="idBloqueDatos">

			<div id="idBloqueTitulo">
				<h3 id="idDatosTitulo">Datos personales</h3>

				<div id="idEditDatos" title="Modificar datos personales" align="center";>
					<i onclick="ModifDatos()"class="material-icons button edit">edit</i></div>
			</div>

			<div id="idBloqueCampos">
			  <div id="idCamposDatos" style="display: none;">
			    <label id="idLabelDatos" for="idProfesional" style="text-align: left;">idProfesional</label>
			    <div id="idInputDatos">
			      <input type="text" id="idProfesional" placeholder="idProfesional"; disabled>
			    </div>
			  </div>

			  <div id="idCamposDatos">
			    <label id="idLabelDatos" for="nombre">Nombres</label>
			    <div id="idInputDatos">
			      <input type="text" id="nombre" placeholder="Nombre"; disabled>
			    </div>
			  </div>

			  <div id="idCamposDatos">
			    <label id="idLabelDatos" for="apellido">Apellido</label>
			    <div id="idInputDatos">
			      <input type="text" id="apellido" placeholder="Apellido"; disabled>
			    </div>
			  </div>
			  
			  <div id="idCamposDatos">
			    <label id="idLabelDatos" for="dni" >DNI</label>
			    <div id="idInputDatos">
			      <input type="text" id="dni" placeholder="DNI"; disabled>
			    </div>
			  </div>

			  <div id="idCamposDatos">
			    <label id="idLabelDatos" for="matricula">Matrícula</label>
			    <div id="idInputDatos">
			      <input type="text" id="matricula" placeholder="Matricula"; disabled>
			    </div>
			  </div>

			  <div id="idCamposDatos">
			    <label id="idLabelDatos" for="especialidad">Especialidad</label>
			    <div id="idInputDatos">
			      <input type="text" id="especialidad" placeholder="Especialidad"; disabled>
			    </div>
			  </div>

			  <div id="idCamposDatos">
			    <label id="idLabelDatos" for="telefono">Teléfono</label>
			    <div id="idInputDatos">
			      <input type="text" id="telefono" placeholder="Telefono"; disabled>
			    </div>
			  </div>

			  <div id="idCamposDatos">
			    <label id="idLabelDatos" for="mail">Mail</label>
			    <div id="idInputDatos">
			      <input type="text" id="mail" placeholder="Mail"; disabled>
			    </div>
			  </div>

			   <div id="idCamposDatos">
			    <label id="idLabelDatos" for="instagram">Instagram</label>
			    <div id="idInputDatos">
			      <input type="text" id="instagram" placeholder="Instagram"; disabled>
			    </div>
			  </div>

			  <div id="idCamposDatos">
			    <label id="idLabelDatos" for="aliasMP">Alias MP</label>
			    <div id="idInputDatos">
			      <input type="text" id="aliasMP" placeholder="Alias Mercado Pago"; disabled>
			    </div>
			  </div>
			</div>
		</div>

	</div>

<!-- Horarios -->
	<div id="idBloqueTablas">

		
		<div id="idBloqueHorarios">

			<div id="idBloqueTitulo">
				<h3 id="idDatosTitulo">Horarios</h3>

				
				<div id="idEditDatos" title="Agregar horarios" align="center">
					<i onclick="irAgregarHorarios()"class="material-icons" style="cursor: pointer;">add</i></div>
			</div>

			
			<div id="tHorarios" class="form-group row">
			   <table id="tabHorarios" class="table">
					<thead>
						<tr>
							<th style="display: none;">idHorario</th>
							<th>Día</th>
							<th>Horario</th>
							<th>Tipo de turno</th>
							<th>Duración de turno</th>
							<th>Eventual</th>
							<th></th>
						</tr>
					</thead>
					<tbody id="tbodyHorarios"></tbody>
				</table>	
			</div>
		</div>
		
		
		
	

		<div id="myModalModifHorarios" class="modal" tabindex="-1">


		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title">Modificación de horarios!</h5>
   		      </div>
		      <div class="modal-body">
		        <p id="parrafoConfirmacion">Si modificás un horario ya establecido, recordá volver a asignar los turnos otorgados ese día, para evitar turnos duplicados </p>
		      </div>
		      <div class="modal-footer">

		        <input name="confirmarTurno" id="btnConfirmarTurno" type="button" class="btn btn-secondary" value="Confirmar" onclick="irModifHorarios()">

				<input name="cancelar" id="btnCancelar" type="button" class="btn btn-secondary" value="Cancelar" onclick="CancelarIrModifHorarios()()">



		      </div>
		    </div>
		  </div>
		  <div id="idProgressBarModal" class="text-center" style="display:none;">
		        <div class="spinner-border" role="status" style="height: 50px;width: 50px;">
		            <span class="sr-only">Cargando...</span>
		        </div>
		   </div>
		</div>

<!-- Licencias -->

		

		<div id="idBloqueLicencias">

			<div id="idBloqueTitulo">
				<h3 id="idDatosTitulo">Licencias</h3>

				
				<div id="idEditDatos" title="Agregar horarios" align="center"; style="display: inline-block;">
				<i onclick="irAgregarLicencias()"class="material-icons" style="cursor: pointer;">add</i></div>
			</div>


			<div id="tLicencias" class="form-group row">
			   <table id="tabLicencias" class="table">
					<thead>
						<tr>
							<th style="display: none;">idHorario</th>
							<th style="display: none;">idprofesiona</th>
							<th>Fecha desde</th>
							<th>Fecha Hasta</th>
							<th>Motivo de licencia</th>
							<th></th>
						</tr>
					</thead>
					<tbody id="tbodyLicencias"></tbody>
				</table>	
			</div>
		</div>

<!-- Honorarios -->
		<div id="idBloqueHonorarios">

			<div id="idBloqueTitulo">
				<h3 id="idDatosTitulo">Honorarios</h3>

				
				<div id="idEditDatos" title="Agregar valores" align="center"; style="display: inline-block;">
				<i onclick="irAgregarValorConsulta()"class="material-icons" style="cursor: pointer;">add</i></div>
			</div>


			<div id="tHonorarios" class="form-group row">
			   <table id="tabHonorarios" class="table">
					<thead>
						<tr>
							<th id="idValorConsulta" style="display: none;">idValorConsulta</th>
							<th>Tipo de Consulta</th>
							<th>Valor</th>
							<th>Seña</th>
							<th></th>
						</tr>
					</thead>
					<tbody id="tbodyValorConsulta"></tbody>
				</table>	
			</div>
		</div>
			
		
	</div>
<!-- buscar datos profesional -->
	<script type="text/javascript">
		$(document).ready(function () {
			
			if (sessionStorage.getItem("token") == null){
				salir();
			}

			debugger;
			var token = sessionStorage.getItem("token");

			debugger;

			//var idProfesional = sessionStorage.getItem("idProfesional");

			var usuario = sessionStorage.getItem("usuario");

			$.ajax({
				type: "GET",
				url: host + "profesionales/usuario/"+usuario,
				headers: {
					//"Authorization": token,
					"Content-Type":"application/json"
				},
				success: function(response)
				{

					debugger;

					sessionStorage.setItem("sessionStorage_idProfesional", response.idProfesional);
					
					$("#idProfesional").val(response.idProfesional);
					$("#nombre").val(response.nombre);
					$("#apellido").val(response.apellido);
					$("#dni").val(response.dni);
					$("#matricula").val(response.matricula);
					$("#especialidad").val(response.especialidad);
					$("#telefono").val(response.telefono);
					$("#mail").val(response.mail);
					$("#valorConsulta").val(response.valorConsulta);
					$("#instagram").val(response.instagram);
					$("#aliasMP").val(response.aliasMP);

					//buscarHorarios(idProfesional);
					debugger;

					buscarFoto();
					debugger;		

					//buscarValoresDeConsultas(idProfesional);		

					buscarHorarios(response.idProfesional);
					debugger;	

					buscarLicencias(response.idProfesional);
					debugger;
			
					buscarValoresDeConsultas(response.idProfesional);
					debugger;

				},

				dataType: "json",
				error: function(xhr, status, error) {
					
					debugger;
					if(status == 400 || status != 401){
						debugger;
						//pacientes($("#dni").val());


					}else{
						debugger;
					alert("Error al buscar el Profecionales");
					}

				}
			});

		});

	</script>

<!-- Buscar horarios
	<script type="text/javascript">
		$(document).ready(function () {
			debugger;

			var idProfesional = sessionStorage.getItem("sessionStorage_idProfesional");

			buscarHorarios(idProfesional);
			debugger;
		});
	</script>

	Buscar Licencias
	<script type="text/javascript">
		$(document).ready(function () {
			debugger;

			var idProfesional = sessionStorage.getItem("sessionStorage_idProfesional");

			buscarLicencias(idProfesional);
			debugger;
		});
	</script>

	Buscar Honorarios
	<script type="text/javascript">
		$(document).ready(function () {
			debugger;

			var idProfesional = sessionStorage.getItem("sessionStorage_idProfesional");

			buscarValoresDeConsultas(idProfesional);
			debugger;
		});
	</script> -->


</body>

</html>