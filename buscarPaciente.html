<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Espacio Nutripedia</title>
	<script src="js/variablesGlobales.js"></script>
	<script src="js/pacientes.js"></script>
	<script src="js/buscarTurno.js"></script>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/buscarPaciente.css">

</head>
<body>

	<div  style="text-align: center;">

		<div class="alert alert-success" role="alert" id="pacienteOk" align="center" style="display:none;">
	    	<h4 class="alert-heading">Bien!</h4>
	     	<p>El/la consultante fue registradx</p>
	    </div>

	    <div class="alert alert-danger" role="alert" id="errorPaciente" align="center" style="display:none;">
	    	<h4 class="alert-heading">Error!</h4>
	     	<p>Debe ingresar todos los datos de el/la consultante</p>
	    </div>

	    <div class="alert alert-warning" role="alert" id="yaExiste" align="center" style="display:none;">
	    	<h4 class="alert-heading">Ya Existe!</h4>
	     	<p>El DNI ya existe en la base de datos</p>
	    </div>

		<h3 style="text-align: center; margin-top: 20px; color: #31572C">DATOS DEL PACIENTE</h3>
		
		<hr />
		
		<div style="margin:10px;">

			<h5 style="color: #31572C; margin-top: 20px;">Por favor ingrese el DNI del paciente y verifiquelos.</h5>

			    
		   <!--  <div class="col-sm-12" style="margin-top: 20px"; display="inline-block">
		      <input id="dni" class="form-control" type="text" placeholder="Ingresar DNI">
		    </div> -->

		    <div class="form-group row" style="margin-bottom: 5px;">
			    <label for="dni" class="col-sm-3 col-form-label">DNI</label>
			    <div class="col-sm-8" style="display: inline-block;">
			      <input type="text" class="form-control" id="dni" placeholder="DNI">
			      
			      <div style="text-align: end; margin: 10px">
					 <input name="buscarPaciente" id="buscarPaciente" type="button" class="btn btn-secondary" value="Buscar" onclick="buscarPaciente()">
				  </div>

			    </div>
			    
			 </div>

<!-- 
			<div style="text-align: end; margin: 10px">
		
				 <input name="buscarPaciente" id="buscarPaciente" type="button" class="btn btn-secondary" value="Buscar" onclick="buscarPaciente()">

				 <input name="cancelar" id="btnCancelar" type="button" class="btn btn-secondary" value="Cancelar" onclick="Cancelar()">
			
			</div> -->

		

		 	<div id="datosPersonales">

			 	  
		 	  	<!-- <h3 style="margin-bottom: 20px; color: #31572C">Verifique si los datos son correctos</h3> -->
			 	  

			 	  <div class="form-group row" style="margin-bottom: 5px; display: none">
				    <label for="idPaciente" class="col-sm-3 col-form-label">idPaciente</label>
				    <div class="col-sm-9">
				      <input type="text" class="form-control" id="idPaciente" placeholder="idPaciente">
				    </div>
				  </div>

				  <div class="form-group row" style="margin-bottom: 5px;">
				    <label for="nombre" class="col-sm-3 col-form-label">Nombres</label>
				    <div class="col-sm-8">
				      <input type="text" class="form-control" id="nombre" placeholder="Nombre">
				    </div>
				  </div>

				  <div class="form-group row" style="margin-bottom: 5px;">
				    <label for="apellido" class="col-sm-3 col-form-label">Apellido</label>
				    <div class="col-sm-8">
				      <input type="text" class="form-control" id="apellido" placeholder="Apellido">
				    </div>
				  </div>
				  
				  <div class="form-group row" style="margin-bottom: 5px;">
				    <label for="fechaNac" class="col-sm-3 col-form-label">Fecha de Nacimiento</label>
				    <div class="col-sm-8">
				      <input type="text" class="form-control" id="fechaNac" placeholder="Fecha Nac">
				    </div>
				  </div>

				  <div class="form-group row" style="margin-bottom: 5px;">
				    <label for="dniBD" class="col-sm-3 col-form-label">DNI</label>
				    <div class="col-sm-8">
				      <input type="text" class="form-control" id="dniBD" placeholder="DNI">
				    </div>
				  </div>

				  <div class="form-group row" style="margin-bottom: 5px;">
				    <label for="direccion" class="col-sm-3 col-form-label">Dirección</label>
				    <div class="col-sm-8">
				      <input type="text" class="form-control" id="direccion" placeholder="Direccion">
				    </div>
				  </div>

				  <div class="form-group row" style="margin-bottom: 5px;">
				    <label for="localidad" class="col-sm-3 col-form-label">Localidad</label>
				    <div class="col-sm-8">
				      <input type="text" class="form-control" id="localidad" placeholder="Localidad">
				    </div>
				  </div>

				  <div class="form-group row" style="margin-bottom: 5px;">
				    <label for="telefono" class="col-sm-3 col-form-label">Teléfono</label>
				    <div class="col-sm-8">
				      <input type="text" class="form-control" id="telefono" placeholder="Telefono">
				    </div>
				  </div>

				  <div class="form-group row" style="margin-bottom: 5px;">
				    <label for="mail" class="col-sm-3 col-form-label">Mail</label>
				    <div class="col-sm-8">
				      <input type="text" class="form-control" id="mail" placeholder="Mail">
				    </div>
				  </div>


			
			</div>

		    	

		</div>

		 <div>
			<input name="confirmarDatosPersonales" id="btnconfirmarDatosPersonales" type="button" class="btn btn-secondary" value="Siguiente" onclick="confirmarDatosPersonales()">

			<input name="modifcarDatosPaciente" id="btnModifcarDatosPaciente" type="button" class="btn btn-secondary" value="Modificar datos" onclick="modifcarDatosPaciente()">		

			<input name="guardarModifcarDatosPaciente" id="btnGuardarModifcarDatosPaciente" type="button" class="btn btn-secondary" value="Guardar" onclick="guardarModifcarDatosPaciente()">				

			<input name="cancelar" id="btnCancelar" type="button" class="btn btn-secondary" value="Cancelar" onclick="Cancelar()">
		 </div>


		<div id="myModal2" class="modal" tabindex="-1">

			<div class="alert alert-success" role="alert" id="turnoAsignado" align="center" style="display:none;">
		    	<h4 class="alert-heading">Gracias!</h4>
		     	<p>El turno fue confirmado, te enviamos un mail con los datos.</p>
		    </div>

			<div class="alert alert-danger" role="alert" id="errorAltaTurno" align="center" style="display:none;">
			  	<h4 class="alert-heading">Error!</h4>
			   	<p>Hubo un error al asignar el turno, vuelva a intentar en un momento</p>
			</div>

			<div class="alert alert-danger" role="alert" id="errorPagoReserva" align="center" style="display:none;">
			  	<h4 class="alert-heading">Error!</h4>
			   	<p>El pago fue rechazado. Por favor, verifique los datos y vuelva a intentarlo</p>
			</div>



			  <div class="modal-dialog">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h5 class="modal-title">Nuevo turno</h5>
			        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			      </div>
			      <div class="modal-body">
			        <p id="parrafoConfirmacionTurno"></p>
			      </div>
			      <div class="modal-footer">
			        
			        <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
			        <button type="button" class="btn btn-primary">Confirmar</button> -->

			        <input name="pagarSeña" id="btnPagarSeña" type="button" class="btn btn-secondary" value="Pagar" onclick="confirmarTurno()">

					<input name="cancelar" id="btnCancelar" type="button" class="btn btn-secondary" value="Cancelar" onclick="Cancelar()">



			      </div>
			    </div>
			  </div>
			  <div id="idProgressBar" class="text-center" style="display:none;">
		        <div class="spinner-border" role="status" style="height: 50px;width: 50px;">
		            <span class="sr-only">Cargando...</span>
		        </div>
		       </div>
			</div>

			<div id="myModal3" class="modal" tabindex="-1">

			  <div class="modal-dialog">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h5 class="modal-title">Atencion!</h5>
			        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			      </div>
			      <div class="modal-body">
			        <p id=>No encontramos el DNI ingresado.</p>
			      </div>
			      <div class="modal-footer">

			        <input name="primeraVez" id="btnPrimeraVez" type="button" class="btn btn-secondary" value="Primera vez" onclick="primeraVez()">

					<input name="volverAIntentar" id="btnVolverAIntentar" type="button" class="btn btn-secondary" value="Volver a intentar" onclick="volverAIntentar()">

			      </div>
			    </div>
			  </div>
			  <div id="idProgressBar" class="text-center" style="display:none;">
		        <div class="spinner-border" role="status" style="height: 50px;width: 50px;">
		            <span class="sr-only">Cargando...</span>
		        </div>
		       </div>
			</div>


			<div id="myModal4" class="modal" tabindex="-1">

				<div class="alert alert-success" role="alert" id="turnoAsignado" align="center" style="display:none;">
			    	<h4 class="alert-heading">Gracias!</h4>
			     	<p>El turno fue confirmado, te enviamos un mail con los datos.</p>
			    </div>

				<div class="alert alert-danger" role="alert" id="errorAltaTurno" align="center" style="display:none;">
				  	<h4 class="alert-heading">Error!</h4>
				   	<p>Hubo un error al asignar el turno, vuelva a intentar en un momento</p>
				</div>


				  <div class="modal-dialog">
				    <div class="modal-content">
				      <div class="modal-header">
				        <h5 class="modal-title">Nuevo turno</h5>
				        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				      </div>
				      <div class="modal-body">
				        <p id="parrafoConfirmacionTurnosinMP"></p>
				      </div>
				      <div class="modal-footer">

				        <input name="pagarSeña" id="btnPagarSeña" type="button" class="btn btn-secondary" value="Confirmar" onclick="confirmarTurno()">

						<input name="cancelar" id="btnCancelar" type="button" class="btn btn-secondary" value="Cancelar" onclick="Cancelar()">



				      </div>
				    </div>
				  </div>
				  <div id="idProgressBar" class="text-center" style="display:none;">
			        <div class="spinner-border" role="status" style="height: 50px;width: 50px;">
			            <span class="sr-only">Cargando...</span>
			        </div>
			       </div>
				</div>


		</div>

</body>

<script type="text/javascript">
      $(document).ready(function () {

      	var paramstr = window.location.search.substr(1);
        var paramarr = paramstr.split ("&");
        var params = {};

        for ( var i = 0; i < paramarr.length; i++) {
            var tmparr = paramarr[i].split("=");
            params[tmparr[0]] = tmparr[1];
        }

        debugger;
         if (params["dni"] == "undefined" || params["dni"] == ""){
        	$("#dni").val("");
        	debugger;

        }else{	
        	debugger;
           	$("#dni").val(params["dni"]);
           	buscarPaciente();
        }

         

      });
    </script>

</html>